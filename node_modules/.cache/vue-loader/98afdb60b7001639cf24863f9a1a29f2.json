{"remainingRequest":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\micha\\VueProjects\\play-state-main\\src\\views\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\src\\views\\Dashboard.vue","mtime":1636334635213},{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1636330090083},{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636330091031},{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1636330159038}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IEdhbWVGb3JtIGZyb20gJ0AvY29tcG9uZW50cy9HYW1lRm9ybScKaW1wb3J0IHsgYXV0aCwgc3RvcmFnZSwgZ2FtZXNDb2xsZWN0aW9uIH0gZnJvbSAnLi4vZmlyZWJhc2UnCmV4cG9ydCBkZWZhdWx0IHsKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBHYW1lRm9ybQogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZ2FtZXM6IFtdLAogICAgICAgICAgICBwSWQ6IG51bGwsCiAgICAgICAgICAgIHBUaXRsZTogbnVsbCwKICAgICAgICAgICAgZGVsZXRlRGlhbG9nOiBmYWxzZQogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcFN0YXRlKFsndXNlclByb2ZpbGUnXSkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXN5bmMgYWRkR2FtZShkb2MpIHsKICAgICAgICAgICAgbGV0IGltZyA9ICcnCiAgICAgICAgICAgIGlmKGRvYy5pbWFnZSkgewogICAgICAgICAgICAgICAgaW1nID0gYXdhaXQgc3RvcmFnZS5yZWYoKS5jaGlsZChkb2MuaW1hZ2UpLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmdhbWVzLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCwKICAgICAgICAgICAgICAgIHRpdGxlOiBkb2MudGl0bGUsCiAgICAgICAgICAgICAgICBkZXZlbG9wZXI6IGRvYy5kZXZlbG9wZXIsCiAgICAgICAgICAgICAgICBwdWJsaXNoZXI6IGRvYy5wdWJsaXNoZXIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZG9jLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgaW1hZ2U6IGltZywKICAgICAgICAgICAgICAgIGltZzogZG9jLmltYWdlCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgdXBkYXRlR2FtZShkb2MpIHsKICAgICAgICAgICAgbGV0IGltZyA9ICcnCiAgICAgICAgICAgIGlmKGRvYy5pbWFnZSkgewogICAgICAgICAgICAgICAgaW1nID0gYXdhaXQgc3RvcmFnZS5yZWYoKS5jaGlsZChkb2MuaW1hZ2UpLmdldERvd25sb2FkVVJMKCkKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmdhbWVzLnNwbGljZShkb2MuaW5kZXgsIDEsIHsKICAgICAgICAgICAgICAgIGlkOiBkb2MuaWQsCiAgICAgICAgICAgICAgICB0aXRsZTogZG9jLnRpdGxlLAogICAgICAgICAgICAgICAgZGV2ZWxvcGVyOiBkb2MuZGV2ZWxvcGVyLAogICAgICAgICAgICAgICAgcHVibGlzaGVyOiBkb2MucHVibGlzaGVyLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRvYy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgIGltYWdlOiBpbWcsCiAgICAgICAgICAgICAgICBpbWc6IGRvYy5pbWFnZQogICAgICAgICAgICB9KQogICAgICAgIH0sCgogICAgICAgIGFzeW5jIGdldEdhbWVzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdhbWVzQ29sbGVjdGlvbi53aGVyZSgndXNlcklkJywgJz09JywgYXV0aC5jdXJyZW50VXNlci51aWQpLmdldCgpCiAgICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goIGFzeW5jIChkb2MpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgaW1nID0gJycKICAgICAgICAgICAgICAgICAgICBpZihkb2MuZGF0YSgpLmltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGltZyA9IGF3YWl0IHN0b3JhZ2UucmVmKCkuY2hpbGQoZG9jLmRhdGEoKS5pbWFnZSkuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBpZDogZG9jLmlkLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZG9jLmRhdGEoKS50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGV2ZWxvcGVyOiBkb2MuZGF0YSgpLmRldmVsb3BlciwKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGlzaGVyOiBkb2MuZGF0YSgpLnB1Ymxpc2hlciwKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRvYy5kYXRhKCkuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiBpbWcsCiAgICAgICAgICAgICAgICAgICAgICAgIGltZzogZG9jLmRhdGEoKS5pbWFnZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpCiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBhc3luYyBkZWxldGVDb25maXJtKGlkLCB0aXRsZSkgewogICAgICAgICAgICB0aGlzLmRlbGV0ZURpYWxvZyA9IHRydWUKICAgICAgICAgICAgdGhpcy5wSWQgPSBpZAogICAgICAgICAgICB0aGlzLnBUaXRsZSA9IHRpdGxlCiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgZGVsZXRlR2FtZSgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGF3YWl0IGdhbWVzQ29sbGVjdGlvbi5kb2ModGhpcy5wSWQpLmRlbGV0ZSgpCiAgICAgICAgICAgICAgICBhbGVydCgnR2FtZSBkZWxldGVkIScpCgogICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGdhbWUgZnJvbSBhcnJheQogICAgICAgICAgICAgICAgdGhpcy5nYW1lcy5zcGxpY2UodGhpcy5nYW1lcy5maW5kSW5kZXgoeCA9PiB4LmlkID09IHRoaXMucElkKSwgMSkKICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlRGlhbG9nID0gZmFsc2UKCiAgICAgICAgICAgICAgICAvLyByZXNldAogICAgICAgICAgICAgICAgdGhpcy5wSWQgPSBudWxsCiAgICAgICAgICAgICAgICB0aGlzLnBUaXRsZSA9IG51bGwKICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGFzeW5jIG1vdW50ZWQoKSB7CiAgICAgICAgYXdhaXQgdGhpcy5nZXRHYW1lcygpCiAgICB9Cn0K"},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"dashboard\">\n        <h1>Hi, {{ userProfile.name }}</h1>\n        <GameForm @game:added=\"addGame\" />\n        <v-row>\n            <v-col md=\"4\" v-for=\"(game, index) in games\" :key=\"game.id\">\n                <v-card>\n                    <v-img\n                        v-if=\"game.image\"\n                        height=\"250\"\n                        :src=\"game.image\"\n                        lazy-src=\"https://via.placeholder.com/250\"\n                    >\n                    </v-img>\n                    <v-card-title>{{ game.title }}</v-card-title>\n                    <v-card-text>\n                        <p class=\"subtitle-1\">Developer: {{ game.developer }}</p>\n                        <p class=\"subtitle-1\">Publisher: {{ game.publisher }}</p>\n                        <p>{{ game.description }}</p>\n                    </v-card-text>\n                    <v-card-actions>\n                        <GameForm :game=\"game\" :index=\"index\" @game:updated=\"updateGame\" />\n                        <v-btn color=\"red\" @click=\"deleteConfirm(game.id, game.title)\" text>Delete</v-btn>\n                    </v-card-actions>\n                </v-card>\n            </v-col>\n        </v-row>\n\n        <v-dialog\n            v-model=\"deleteDialog\"\n            max-width=\"400\"\n        >\n            <v-card>\n                <v-card-title class=\"headline\">\n                    Delete Game?\n                </v-card-title>\n                <v-card-text>Are you sure you want to delete <b>{{ pTitle }}</b>?</v-card-text>\n                <v-card-actions>\n                    <v-btn text color=\"red\" @click=\"deleteGame\">Delete</v-btn>\n                    <v-btn @click=\"deleteDialog = false\" text color=\"secondary\">Close</v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport GameForm from '@/components/GameForm'\nimport { auth, storage, gamesCollection } from '../firebase'\nexport default {\n    components: {\n        GameForm\n    },\n    data() {\n        return {\n            games: [],\n            pId: null,\n            pTitle: null,\n            deleteDialog: false\n        }\n    },\n    computed: {\n        ...mapState(['userProfile'])\n    },\n    methods: {\n        async addGame(doc) {\n            let img = ''\n            if(doc.image) {\n                img = await storage.ref().child(doc.image).getDownloadURL()\n            }\n            this.games.push({\n                id: doc.id,\n                title: doc.title,\n                developer: doc.developer,\n                publisher: doc.publisher,\n                description: doc.description,\n                image: img,\n                img: doc.image\n            })\n        },\n\n        async updateGame(doc) {\n            let img = ''\n            if(doc.image) {\n                img = await storage.ref().child(doc.image).getDownloadURL()\n            }\n            this.games.splice(doc.index, 1, {\n                id: doc.id,\n                title: doc.title,\n                developer: doc.developer,\n                publisher: doc.publisher,\n                description: doc.description,\n                image: img,\n                img: doc.image\n            })\n        },\n\n        async getGames() {\n            try {\n                const querySnapshot = await gamesCollection.where('userId', '==', auth.currentUser.uid).get()\n                querySnapshot.forEach( async (doc) => {\n                    let img = ''\n                    if(doc.data().image) {\n                        img = await storage.ref().child(doc.data().image).getDownloadURL()\n                    }\n                    this.games.push({\n                        id: doc.id,\n                        title: doc.data().title,\n                        developer: doc.data().developer,\n                        publisher: doc.data().publisher,\n                        description: doc.data().description,\n                        image: img,\n                        img: doc.data().image\n                    })\n                })\n            } catch(e) {\n                console.log(e)\n            }\n        },\n\n        async deleteConfirm(id, title) {\n            this.deleteDialog = true\n            this.pId = id\n            this.pTitle = title\n        },\n\n        async deleteGame() {\n            try {\n                await gamesCollection.doc(this.pId).delete()\n                alert('Game deleted!')\n\n                // remove game from array\n                this.games.splice(this.games.findIndex(x => x.id == this.pId), 1)\n                this.deleteDialog = false\n\n                // reset\n                this.pId = null\n                this.pTitle = null\n            } catch(e) {\n                console.log(e)\n            }\n        }\n    },\n    async mounted() {\n        await this.getGames()\n    }\n}\n</script>"]}]}