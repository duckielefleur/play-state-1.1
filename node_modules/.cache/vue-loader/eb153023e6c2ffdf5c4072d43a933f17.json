{"remainingRequest":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\micha\\VueProjects\\play-state-main\\src\\components\\GameForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\src\\components\\GameForm.vue","mtime":1636334634973},{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1636330090083},{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636330091031},{"path":"C:\\Users\\micha\\VueProjects\\play-state-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1636330159038}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdhbWVzQ29sbGVjdGlvbiwgYXV0aCwgc3RvcmFnZSB9IGZyb20gJy4uL2ZpcmViYXNlJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0dhbWVGb3JtJywKICAgIHByb3BzOiBbJ2dhbWUnLCAnaW5kZXgnXSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICAgICAgICBkaWFsb2c6IGZhbHNlLAogICAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICAgIGRldmVsb3BlcjogJycsCiAgICAgICAgICAgIHB1Ymxpc2hlcjogJycsCiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICAgICAgZmlsZTogbnVsbCwKICAgICAgICAgICAgZmllbGRSdWxlczogWwogICAgICAgICAgICAgICAgdiA9PiAhIXYgfHwgJ3RoaXMgZmllbGQgaXMgcmVxdWlyZWQnCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG9sZEltYWdlOiAnJwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgcmVzZXRGb3JtKCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKQogICAgICAgIH0sCgogICAgICAgIGFzeW5jIHN0b3JlR2FtZSgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UKCiAgICAgICAgICAgICAgICAvLyB1cGxvYWQgZmlsZQogICAgICAgICAgICAgICAgY29uc3QgZmlsZVJlZiA9ICd1cGxvYWRzL2dhbWVzLycgKyB0aGlzLmZpbGUubmFtZQogICAgICAgICAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBzdG9yYWdlLnJlZihmaWxlUmVmKS5wdXQodGhpcy5maWxlKQoKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIHVzZXJJZDogYXV0aC5jdXJyZW50VXNlci51aWQsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgICAgICAgICAgICAgZGV2ZWxvcGVyOiB0aGlzLmRldmVsb3BlciwKICAgICAgICAgICAgICAgICAgICBwdWJsaXNoZXI6IHRoaXMucHVibGlzaGVyLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgIGltYWdlOiBmaWxlUmVmCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCBnYW1lc0NvbGxlY3Rpb24uYWRkKGRhdGEpCgogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ2FtZTphZGRlZCcsIGRhdGEpCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlc2V0Rm9ybSgpCiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGFzeW5jIHVwZGF0ZUdhbWUoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCgogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBhdXRoLmN1cnJlbnRVc2VyLnVpZCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICAgICAgICAgICAgICBkZXZlbG9wZXI6IHRoaXMuZGV2ZWxvcGVyLAogICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hlcjogdGhpcy5wdWJsaXNoZXIsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYodGhpcy5maWxlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIG9sZEltYWdlCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZVJlZk9sZCA9IHRoaXMuZ2FtZS5pbWcKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdG9yYWdlLnJlZihmaWxlUmVmT2xkKS5kZWxldGUoKQoKICAgICAgICAgICAgICAgICAgICAvLyB1cGxvYWQgZmlsZQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVSZWYgPSAndXBsb2Fkcy9nYW1lcy8nICsgdGhpcy5maWxlLm5hbWUKICAgICAgICAgICAgICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHN0b3JhZ2UucmVmKGZpbGVSZWYpLnB1dCh0aGlzLmZpbGUpCiAgICAgICAgICAgICAgICAgICAgZGF0YS5pbWFnZSA9IGZpbGVSZWYKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5pbWFnZSA9IHRoaXMuZ2FtZS5pbWcKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCBnYW1lc0NvbGxlY3Rpb24uZG9jKHRoaXMuZ2FtZS5pZCkudXBkYXRlKGRhdGEpCgogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXNldEZvcm0oKQogICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICAgICAgICAgICAgZGF0YS5pbmRleCA9IHRoaXMuaW5kZXgKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2dhbWU6dXBkYXRlZCcsIGRhdGEpCiAgICAgICAgICAgICAgICBhbGVydCgnR2FtZSB1cGRhdGVkIScpCiAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIHNldERhdGEoKSB7CiAgICAgICAgICAgIGlmKHRoaXMuZ2FtZSkgewogICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuZ2FtZS50aXRsZQogICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoZXIgPSB0aGlzLmdhbWUucHVibGlzaGVyCiAgICAgICAgICAgICAgICB0aGlzLmRldmVsb3BlciA9IHRoaXMuZ2FtZS5kZXZlbG9wZXIKICAgICAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0aGlzLmdhbWUuZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgIHRoaXMub2xkSW1hZ2UgPSB0aGlzLmdhbWUuaW1hZ2UKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuc2V0RGF0YSgpCiAgICB9Cn0K"},{"version":3,"sources":["GameForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GameForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"game-form\">\n        <v-btn @click=\"dialog = !dialog\" color=\"primary\" v-if=\"!game\">Add new game</v-btn>\n        <v-btn @click=\"dialog = !dialog; setData()\" color=\"primary\" v-else>Edit game</v-btn>\n\n        <v-dialog v-model=\"dialog\" persistent width=\"600px\">\n            <v-card>\n                <v-card-title v-if=\"!game\">Add new game</v-card-title>\n                <v-card-title v-else>Edit game</v-card-title>\n                <v-card-text>\n                    <v-form\n                        v-model=\"valid\"\n                        lazy-validation\n                        ref=\"form\"\n                    >\n                        <v-text-field\n                            v-model=\"title\"\n                            :rules=\"fieldRules\"\n                            label=\"Game title\"\n                            required\n                            outline\n                        >\n                        </v-text-field>\n                        \n                        <v-text-field\n                            v-model=\"developer\"\n                            :rules=\"fieldRules\"\n                            label=\"Game developer\"\n                            outlined\n                            required\n                        >\n                        </v-text-field>\n\n                        <v-text-field\n                            v-model=\"publisher\"\n                            :rules=\"fieldRules\"\n                            label=\"Game publisher\"\n                            outlined\n                            required\n                        >\n                        </v-text-field>\n\n                        <v-textarea\n                            v-model=\"description\"\n                            :rules=\"fieldRules\"\n                            label=\"Game description\"\n                            outlined\n                            required\n                        >\n                        </v-textarea>\n\n                        <v-file-input\n                            accept=\"image/*\"\n                            label=\"File input\"\n                            v-model=\"file\"\n                            show-size\n                        >\n                        </v-file-input>\n                        <p>Current image: <a v-if=\"oldImage\" :href=\"oldImage\">link</a></p>\n\n                        <v-btn\n                            elevation=\"2\"\n                            color=\"primary\"\n                            @click=\"storeGame\"\n                            :loading=\"isLoading\"\n                            v-if=\"!game\"\n                        >\n                            Store\n                        </v-btn>\n                        <v-btn\n                            elevation=\"2\"\n                            color=\"primary\"\n                            @click=\"updateGame\"\n                            :loading=\"isLoading\"\n                            v-else\n                        >\n                            Update\n                        </v-btn>\n                    </v-form>\n                </v-card-text>\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn\n                        color=\"blue darken-1\"\n                        text\n                        @click=\"dialog = false\"\n                    >\n                        Close\n                    </v-btn>\n                </v-card-actions>\n            </v-card>\n        </v-dialog>\n    </div>\n</template>\n\n<script>\nimport { gamesCollection, auth, storage } from '../firebase'\n\nexport default {\n    name: 'GameForm',\n    props: ['game', 'index'],\n    data() {\n        return {\n            isLoading: false,\n            valid: false,\n            dialog: false,\n            title: '',\n            developer: '',\n            publisher: '',\n            description: '',\n            file: null,\n            fieldRules: [\n                v => !!v || 'this field is required'\n            ],\n            oldImage: ''\n        }\n    },\n    methods: {\n        resetForm() {\n            this.$refs.form.reset()\n        },\n\n        async storeGame() {\n            try {\n                this.isLoading = false\n\n                // upload file\n                const fileRef = 'uploads/games/' + this.file.name\n                const snapshot = await storage.ref(fileRef).put(this.file)\n\n                let data = {\n                    userId: auth.currentUser.uid,\n                    title: this.title,\n                    developer: this.developer,\n                    publisher: this.publisher,\n                    description: this.description,\n                    image: fileRef\n                }\n                const doc = await gamesCollection.add(data)\n\n                this.$emit('game:added', data)\n                await this.resetForm()\n                this.isLoading = false\n                this.dialog = false\n            } catch(e) {\n                console.log(e)\n            }\n        },\n\n        async updateGame() {\n            try {\n                this.isLoading = false\n\n                let data = {\n                    userId: auth.currentUser.uid,\n                    title: this.title,\n                    developer: this.developer,\n                    publisher: this.publisher,\n                    description: this.description\n                }\n                \n                if(this.file) {\n                    // delete oldImage\n                    const fileRefOld = this.game.img\n                    await storage.ref(fileRefOld).delete()\n\n                    // upload file\n                    const fileRef = 'uploads/games/' + this.file.name\n                    const snapshot = await storage.ref(fileRef).put(this.file)\n                    data.image = fileRef\n                } else {\n                    data.image = this.game.img\n                }\n\n                const doc = await gamesCollection.doc(this.game.id).update(data)\n\n                await this.resetForm()\n                this.isLoading = false\n                this.dialog = false\n                data.index = this.index\n                this.$emit('game:updated', data)\n                alert('Game updated!')\n            } catch(e) {\n                console.log(e)\n            }\n        },\n\n        setData() {\n            if(this.game) {\n                this.title = this.game.title\n                this.publisher = this.game.publisher\n                this.developer = this.game.developer\n                this.description = this.game.description\n                this.oldImage = this.game.image\n            }\n        }\n    },\n    mounted() {\n        this.setData()\n    }\n}\n</script>\n"]}]}